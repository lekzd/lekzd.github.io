Че по чем, Москва? Меня зовут Саня, я с Питера, с тех самых дворов, где графика жизни состоит из битых бутылок, трескающегося асфальта и вечного отражения панелек в лужах. У нас тут не до жиру, быть бы живу — так что мы с детства учимся отличать настоящую тему от лапши на уши.

И вот я гляжу на ваши ультра-реалистичные игры с их «фотограмметрией», «рейтрейсингом» и прочими заумными словами... И вижу то же самое, что вижу, когда к нам заезжают пафосные тачки с вашего Садового — красивый обвес, а движок-то троит, и на кочках его сразу кособоко ведет.

Поэтому сегодня я здесь, чтобы снять с вас, дорогие москвичи, розовые очки. Мы поговорим о самой большой, наглой и красивой афере в игровой индустрии. О том, как вас, как лохов, разводят на бабло, впаривая вам иллюзию.

Мы пройдемся по всем задворкам этого виртуального Купчино — от тумана, который скрывает косяки, до «честных» лучей, которые считают только три отскока. Я докажу вам, что вся ваша крутая графика — это такой же гипсокартон, как и стены в наших подъездах. Готовьтесь, будет жарко. Погнали.


1. Всё начинается с треугольников

«Ну, вы там в Москве, наверное, думаете, что ваш Кирилл Иваныч из «Ашмана-Геймса» из глины персонажей лепит, да? Ан нет. Всё начинается с треугольников. Любой ваш 3D-объект, хоть танк, хоть сраная кружка — это просто сетка из этих самых треугольников. Для видяхи этот весь ваш «Авата́р» — как для малого в песочнице: только треугольные куличики и может делать. Вообще без понятия «а нафига?». Она тупо штампует.

И вот вам дичь: RTX 5090 за четыре штуки зелени и встроенная, с которой бабушка в «Косынку» режет, — делают это одинаково быстро. Одна — просто быстрее насчитает этих треугольников. А на сэкономленные деньги можно жоповозку нормальную купить, и семью на всю жизнь обеспечить. Это вам не для средних умов, пацаны, это вам на подумать.

«А как же камеры, объекты, анимации и это всё?» — спросит москвич. О, это загадка из разряда: как так вышло, что пацаны на одних «квадратиках» (продажа ворованных транзисторов с драгметаллами из микросхем) сделали себе квартиру, машину и хорошую жизнь? Да, большинство сели, но кто-то же выбился в люди!

Так вот, держите схему, бесплатно. Всё это — **матрицы**! Нет, я не про ваш фильм двухтысячного года, эффекты в котором настолько пиздатые, что большинство из вас были зачаты после похода родителей в киношку на него. Я про математическую лабуду, на которую умножается каждая точка треугольника, чтобы впарить вам его как объёмную стенку в пространстве.

Камера, поворот, анимация — эти чёрти будут умножать и перемножать числа, пока ты не забудешь, что тебе всё ещё впаривают те же самые убогие треугольники. Темка, известная уже лет сорок, как ваш «Жигуль», а до сих пор работает. Иллюзия, блядь! Всё — пыль в глаза, а по факту — песочница с треугольными формочками.»

2. Тени — это ещё одна камера

«Мы в Питере живем под облаками, они кидают на наш город тень. Дополнительно тень на наше светлое Купчино кидают жители остальных районов. Так что послушайте насчет теней, я в этом точно волоку.

Вот смотрите. Все эти ваши крутые тени в играх — это по сути **ещё одна камера**. Представьте, что каждый фонарь во дворе — это пацан с подслухом. Он стоит на своём пятаке и не видит всей картины, но он запоминает, кто какой рост и где стоит. Эта «память» — и есть **карта глубины**. Дальше рендер просто смотрит: если объект от тебя дальше, чем от фонаря-подслуха, значит, ты в тени. Всё. Никакой магии, чистый стукачок.

А есть ещё затенения, «эмбиент окклюжн». Это вам не лучи света считать, это постобработка, дешёвый финт. Типа как грязь в углах подъезда — её не специально заносили, она там сама собой накапливается, потому что угол. Так и тут: движок мажет тёмным в те места, куда по логике свет хуже всего пробивается. Иллюзия сложности, а по факту — один фильтр.

И знаете, в чём прикол? Без этих обманов — вообще никуда не годится. Сцена выглядит как плоская бумажка, объекты в воздухе висят. Это как в ясный полдень на площади Восстания — все контуры резкие, ничего не понятно, глазам больно. А теперь зацените наш, питерский вариант: небо в говне, света нет, цвета убитые. Казалось бы, полный швах. Но именно в такую погоду **контактные тени** выходят на первый план. Там, где забор примыкает к земле, где гранитный парапет встречается с асфальтом — лёгкая, едва заметная темнота. И вот этот дешёвый, почти бесплатный эффект и создаёт тот самый ультрареализм. Он не кричит, как московский HDR, он шепчет: «здесь предмет тяжёлый, он здесь лежит по-настоящему».

Вот и вся наука. Чтобы сделать картинку живой, не нужны суперкомпьютеры. Нужно просто знать, где и как аккуратно навести грязь. А уж этому мы в Питере научим кого угодно.»

3. Детализация — обман зрения

«Вы в Москве любите хвастаться: "Ой, у нас тут HDR-освещение, как реально!". А я тебе вот что скажу. Идеально ровный асфальт — нереально. Уж нам ли в России не знать?

Наш купчинский асфальт, в ямах, под моросящим дождем, когда фары автобуса 23-го маршрута по нему отражаются — вот это красота, вот она, жизнь! Скажите, что надо моделить каждую трещину? Да фиг там, у нас уже пиво заканчивается.

Но фокус в чём? Даже если сфоткать этот асфальт на божественный Сони Эриксон с полифонией и натянуть эту фотку как текстуру на низкополигональный меш — выглядит уже не трушно. Пацаны сразу почуют, что дело тут нечисто.

Потому что свет в реале никогда не ложится так, будто он гладит поверхность, как стёкла вашей Москва-Сити. Он цепляется за каждую шероховатость. И вот тут пора вызванивать главных пацанов — **Нормали**.

Это наша козырная карта в колоде. Эта текстура — она как бы шепчет свету: "Видишь эту ямку? Не лезь туда, съебал отсюда!" И свет послушно огибает её, делает объёмной. А **карта высот** — это вообще магия. Она буквально поднимает каждый камешек наверх, делает его осязаемым. Уж мы-то знаем: гладкая поверхность, о которую даже бычка не затушишь, — это говно, а не асфальт. На ней и тяги свои пристроить негде.

А если нужно сделать рельсы, которые в асфальт ещё мой дед закатывал? Юзаем **карту металла** — чтобы блестело как надо, и **панораму окружения** — чтобы в них небо наше, питерское, кислое, отражалось.

И всё это хозяйство — тот самый шулер, у которого в рукаве все восемь козырных карт, — это **шейдер**. Он и есть тот самый фокусник, который всю эту поебень симулирует. Они не свет считают, пацаны. Они тебе мозги пудрят, чтобы ты поверил, что это свет. А ты веришь. Иллюзия, бля!»

4. Отражения — зеркальный мир

У нас на районе, как выйдешь из парадки — всегда лужа. Впрочем, внутри тоже, но другого происхождения. Обычно в отражениях мы видим только серое небо и родную панельку, но я-то точно знаю про отражения всё.

Вообще, для идеальных отражений надо воткнуть ещё одну камеру, как в этот ваш айфон, и рендерить для неё целый мир заново. Но у нас не такой благополучный район, блядь. Это как если бы для каждой лужи во дворе мы строили её точную копию — где ж такие деньги взять? По старинке мы просто втыкаем в лужу текстуру ещё одной панельки. Это **кубическая карта**. Попробуй разбери, это тот же дом или другой. Главное — похоже, и ладно. Оно статичное, вчерашнее, но в мутной воде сойдёт.

Ну а если хочется, чтобы в луже отражалось именно то, что происходит *прямо сейчас* — не беда. Можно отфоткать мир во все 6 направлений, склеить их в куб виртуальным скотчем и показывать сквозь лужу как мутное отражение. В наших лужах разницы, в общем-то, не видно. Дёшево и сердито.

Ну а если весь бюджет производительности уже потрачен на полигоны для новых кроссовок твоего персонажа, открываем портал в **SSR**. Нет, не ту прекрасную страну, где мороженое по 3 копейки, а в **Screen Space Reflections** — дешёвый пост-эффект. Суть проста: берём пиксели из уже готовой картинки на экране и засовываем их в лужи и стёкла. Хитро? Ещё бы! Но фокус в том, что отражается только то, что ты и так видишь. Попробуй посмотреть в такую лужу под углом — а там, блядь, дырка. Пустота. Потому что того, что *должно* быть видно в отражении, но не видно на основном экране, просто не существует. Иллюзия!

Так что запомните: любое отражение в игре — это пиздёж. Иногда качественный, с претензией, иногда — гопнический, на скорую руку. Но это всегда обман. Как и вся графика.

5. Туман — не просто дымка

Вы в Москве свой смог видите только когда шашлыки жжёте, а у нас туман — это как второй паспорт. И скажу я вам, в играх эта тема — не просто для красоты. Это главный костыль для скрытия косяков.
Вот смотрите. У вас там детализация лулзовская на расстоянии вытянутой руки, а дальше — пшик. Объекты просто берут и обрубаются, как бюджет на ремонт дорог. Так вот, чтобы это говно не всплывало, мы запускаем туман. Это как наш питерский моросящий дождик — он замыливает глаза, маскирует дистанцию. Ты уже не видишь, где кончаются полигоны и начинается пустота. Всё плавно тонет в этой дымке. Иллюзия глубины, а по факту — просто градиент, от серого к ещё более серому. Дешёво, но чертовски эффективно.
А вот эти ваши год рэйз, «лучи бога», которые так все любят в играх... Вы что, правда верите, что это свет так художественно пробивается? Это же просто шейдерный эффект, поебень на экране! Нашёлся умник, который догадался взять яркие участки картинки и растянуть от них белые полосы. Всё! Никакой физики, чистый пост-обработочный развод. Это как фары от разбитой девятки во дворе — в тумане кажется, что это ангелы спускаются, а по факту — просто пацаны прикуривают.
Так что запомните: туман в играх — это не атмосфера. Это дизайнер сцены, который орёт: «Блять, тут же у нас ничего не достроено! Быстро налейте сюда тумана, чтобы никто не заметил!». И вы не замечаете. Иллюзия, как и всё остальное. А уж мы-то знаем, как выглядит настоящий, питерский туман — он не глубину создаёт, он просто создаёт проблемы. А в играх он эти проблемы — решает.

6. Ray Tracing — "почти правда"

Настала пора поговорить о действительно серьезной графике: если ранее мы изящно обманывали вас как иногородних, которые впервые заехали в купчино, подсовывая текстуры вместо солнца. То теперь пора вставать со ступенек парадки и лететь в высшую лигу. Мальчик, 3 тысячи зелени нам принеси, мы лучи считать идем! Только представьте как выглядело бы купчино если бы там включили RTX! 

Так вот, путь света в старых играх был столь же прост как и в Питере: он просто упирался в препятствие и все. Больше его никто не видел. Геймдизайнеры буквально повязаны по рукам и ногам и чаще всего не могут выйти из бетонного гетто, как большинство тех с кем я вырос. Несмотря на то, что я рассказал вам ранее про 8 карт, которыми мы эффектно жонглируем, их с лихвой хватит чтобы впечатлить лоха с окраин, но когда собираешься стричь бабло с бояр нужно что-то по-серьезнее. 

Дело в том, что у реального мира, в котором мы живем бесконечно глубокая детализация. Свет это буквально кабанчик, который выскочил из источника, походил по точкам и дошел до нашего глаза подсветив по ходу дела где что на районе лежит. И прожженные геймеры с центра уже давно привыкли юзать свет в своих интересах и уже точно не согласятся заносить бабло преспективным ребятам с купчино, из плюсов у которых только карточные наебки. Чтобы сделать реальный динамический свет, ранее пацаны запаривались и делали фейковые лампочки, которые включались по скриптам, имитируя отсветы редких закатных лучей в комнате. 

Теперь, настали новые времена RTX видеокарт, и дармоедов, которые устроились в геймдев вкручивать невидимые лампочки можно уволить. На передний план выходит свет и с порога раздает стиля. Этот пацан знает в каких углах засели гопники, в ожидании лохов, которых можно развести обычной кубмапой и провожает их обратно в Купчино. Ты хочешь сказать что RTX и лучи теперь заменят все? Ха! Ха! Держите карман шире 

Так вот, если у вас нет 3к зелени на видяху, эти черти всё равно придумали, как достать вас со своими технологиями. Знакомьтесь, Lumen, и я сейчас не про уфимскую рок-группу. Lumen — это технология рейтрейсинга для бедных, для простых жителей окраин. Она запускает лучи на CPU. «Так это же медленно!» — скажешь ты. Ну да, а как ещё заставить тебя выложить три штуки? На самом деле они запускают в 1000 раз меньше лучей, буквально один чистенький луч, а по бокам добавляют особо хитрые фокусы с этими вашими SDF-сетками, которые как бы намекают, где тут у нас стены, а где проходной двор.

И даже если ты раздобыл эти три штуки и купил себе RTX — расслабься. Там всё равно не бесконечные отскоки, как в реальности. Это как если бы наш световой «кабанчик» пробегал не весь район, а только три подъезда, а дальше ему уже лень — и он говорит: «Ну, в общем, там тоже темно, поверь мне на слово». Даже этот «честный» свет — всё равно обрезанный, лимитированный, условный.

И вот финал всей нашей басни.

Чем ближе мы подбираемся к настоящей физике, тем дороже нам обходится эта иллюзия. Сначала мы врали вам текстурами, потом шейдерами, теперь — ограниченными лучами за бешеные деньги. Но игра всё равно остаётся подделкой. Это как построить у себя во дворе точную копию Елисеевского магазина из фанеры и гипсокартона: снаружи — блеск, внутри — пустота. Можно добавить больше света, чтобы блики на мраморе играли, но мрамор-то всё равно фанерный.

Так что запомните, москвичи: не важно, насколько реалистично светятся лужи в вашей игре. Это всё ещё лужи, нарисованные на асфальте. Всё — пыль в глаза, просто теперь эта пыль — по цене золота. Спасибо, что доехали, на этом наш сеанс разоблачения окончен. Вопросы?